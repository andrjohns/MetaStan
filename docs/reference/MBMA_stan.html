<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fitting a model-based meta-analysis model using Stan — MBMA_stan • MetaStan</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Fitting a model-based meta-analysis model using Stan — MBMA_stan" />
<meta property="og:description" content="`MBMA_stan` fits a model-based meta-analysis model using Stan." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MetaStan</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/MetaStan_BNHM.html">Conducting meta-analysis using MetaStan</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/gunhanb/MetaStan/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fitting a model-based meta-analysis model using Stan</h1>
    <small class="dont-index">Source: <a href='https://github.com/gunhanb/MetaStan/blob/master/R/MBMA_stan.R'><code>R/MBMA_stan.R</code></a></small>
    <div class="hidden name"><code>MBMA_stan.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>`MBMA_stan` fits a model-based meta-analysis model using Stan.</p>
    </div>

    <pre class="usage"><span class='fu'>MBMA_stan</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='cn'>NULL</span>,
  family <span class='op'>=</span> <span class='cn'>NULL</span>,
  dose_response <span class='op'>=</span> <span class='st'>"emax"</span>,
  mu_prior <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>10</span><span class='op'>)</span>,
  Emax_prior <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>100</span><span class='op'>)</span>,
  alpha_prior <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>100</span><span class='op'>)</span>,
  tau_prior <span class='op'>=</span> <span class='fl'>0.5</span>,
  tau_prior_dist <span class='op'>=</span> <span class='st'>"half-normal"</span>,
  ED50_prior <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>2.5</span>, <span class='fl'>1.8</span><span class='op'>)</span>,
  ED50_prior_dist <span class='op'>=</span> <span class='st'>"functional"</span>,
  gamma_prior <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>2</span><span class='op'>)</span>,
  <span class='va'>Pred_doses</span>,
  re <span class='op'>=</span> <span class='cn'>TRUE</span>,
  ncp <span class='op'>=</span> <span class='cn'>TRUE</span>,
  chains <span class='op'>=</span> <span class='fl'>4</span>,
  iter <span class='op'>=</span> <span class='fl'>2000</span>,
  warmup <span class='op'>=</span> <span class='fl'>1000</span>,
  adapt_delta <span class='op'>=</span> <span class='fl'>0.95</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>An object of `create_MBMA_dat`.</p></td>
    </tr>
    <tr>
      <th>family</th>
      <td><p>A string specifying the family of distributions defining the statistical
model. Options include "normal", "binomial", and "Poisson".</p></td>
    </tr>
    <tr>
      <th>dose_response</th>
      <td><p>A string specifying the function defining the dose-response model.
Options include "linear", "log-linear", "emax", and "sigmoidal".</p></td>
    </tr>
    <tr>
      <th>mu_prior</th>
      <td><p>A numerical vector specifying the parameter of the normal prior
density for baseline risks, first value is parameter for mean, second is for variance.
Default is c(0, 10).</p></td>
    </tr>
    <tr>
      <th>Emax_prior</th>
      <td><p>A numerical vector specifying the parameter of the normal prior
density for Emax parameter, first value is parameter for mean, second
is for standard deviation. Default is c(0, 10). Needed for emax and sigmoidal models.</p></td>
    </tr>
    <tr>
      <th>alpha_prior</th>
      <td><p>A numerical vector specifying the parameter of the normal prior
density for the alpha parameter, first value is parameter for mean, second is for variance.
Default is c(0, 10). Needed for linear and linear log-dose models.</p></td>
    </tr>
    <tr>
      <th>tau_prior</th>
      <td><p>A numerical value specifying the standard dev. of the prior density
for heterogenety stdev. Default is 0.5.</p></td>
    </tr>
    <tr>
      <th>tau_prior_dist</th>
      <td><p>A string specifying the prior density for the heterogeneity standard deviation,
option is `half-normal` for half-normal prior, `uniform` for uniform prior, `half-cauchy` for
half-cauchy prior.</p></td>
    </tr>
    <tr>
      <th>ED50_prior</th>
      <td><p>A numerical vector specifying the parameter of the normal prior
density for ED50 parameter, first value is parameter for mean, second
is for standard deviation. Default is c(0, 10). Needed for emax and sigmoidal models.</p></td>
    </tr>
    <tr>
      <th>ED50_prior_dist</th>
      <td><p>A string specifying the prior density for the ED50 parameter,
`functional` is for a functional uniform prior, `half-normal` for uniform prior, `half-cauchy` for
half-cauchy prior.</p></td>
    </tr>
    <tr>
      <th>gamma_prior</th>
      <td><p>A numerical vector specifying the parameter of the normal prior
density for gamma parameter, first value is parameter for mean, second
is for standard deviation. Default is c(1, 2). Needed for sigmoidal model.</p></td>
    </tr>
    <tr>
      <th>Pred_doses</th>
      <td><p>A numerical vector specifying the doses which prediction will be made.</p></td>
    </tr>
    <tr>
      <th>re</th>
      <td><p>A string specifying whether random-effects are included to the model. When `FALSE`, the
model corresponds to a fixed-effects model. The default is `TRUE`.</p></td>
    </tr>
    <tr>
      <th>ncp</th>
      <td><p>A string specifying whether to use a non-centered parametrization.
The default is `TRUE`.</p></td>
    </tr>
    <tr>
      <th>chains</th>
      <td><p>A positive integer specifying the number of Markov chains.
The default is 4.</p></td>
    </tr>
    <tr>
      <th>iter</th>
      <td><p>A positive integer specifying the number of iterations for each chain
(including warmup). The default is 2000.</p></td>
    </tr>
    <tr>
      <th>warmup</th>
      <td><p>A positive integer specifying the number of warmup (aka burnin)
iterations per chain. The default is 1000.</p></td>
    </tr>
    <tr>
      <th>adapt_delta</th>
      <td><p>A numerical value specfying the target average proposal acceptance
probability for adaptation. See Stan manual for details. Default is 0.95. In general
you should not need to change adapt_delta unless you see a warning message about
divergent transitions, in which case you can increase adapt_delta from the
default to a value closer to 1 (e.g. from 0.95 to 0.99, or from 0.99 to 0.999, etc).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>an object of class `stanfit` returned by `rstan::sampling`</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Boucher M, et al. The many flavors of model-based meta-analysis:
Part I-Introduction and landmark data. <em>CPT: Pharmacometrics and Systems Pharmacology</em>.
2016;5:54-64.</p>
<p>Mawdsley D, et al. Model-based network meta-analysis: A
framework for evidence synthesis of clinical trial data.
<em>CPT: Pharmacometrics and Systems Pharmacology</em>. 2016;5:393-401.</p>
<p>Zhang J, et al. (2014). Network meta-analysis of randomized
clinical trials: Reporting the proper summaries. <em>Clinical Trials</em>.
11(2), 246–262.</p>
<p>Dias S, et al. Absolute or relative effects?
Arm-based synthesis of trial data. <em>Research Synthesis Methods</em>.
2016;7:23–28.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'>## Load the dataset</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>'dat.Eletriptan'</span>, package <span class='op'>=</span> <span class='st'>"MetaStan"</span><span class='op'>)</span>
<span class='co'>## Fitting a Binomial-Normal Hierarchial model using WIP priors</span>
<span class='va'>datMBMA</span> <span class='op'>=</span> <span class='fu'><a href='create_MBMA_dat.html'>create_MBMA_dat</a></span><span class='op'>(</span>dat <span class='op'>=</span> <span class='va'>dat.Eletriptan</span>,
                         armVars <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>dose <span class='op'>=</span> <span class='st'>"d"</span>, r <span class='op'>=</span> <span class='st'>"r"</span>,
                                     n <span class='op'>=</span> <span class='st'>"n"</span><span class='op'>)</span>,
                         nArmsVar <span class='op'>=</span> <span class='st'>"nd"</span><span class='op'>)</span>

<span class='va'>MBMA.Emax</span>  <span class='op'>&lt;-</span> <span class='fu'>MBMA_stan</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>datMBMA</span>,
                          family <span class='op'>=</span> <span class='st'>"binomial"</span>,
                          dose_response <span class='op'>=</span> <span class='st'>"emax"</span>,
                          Emax_prior <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>10</span><span class='op'>)</span>,
                          ED50_prior <span class='op'>=</span> <span class='st'>"functional"</span>,
                          tau_prior_dist <span class='op'>=</span> <span class='st'>"half-normal"</span>,
                          tau_prior <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>MBMA.Emax</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>MBMA.Emax</span><span class='op'>)</span>

<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Burak Kuersad Guenhan, Christian Roever.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


