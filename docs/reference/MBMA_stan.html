<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="`MBMA_stan` fits a model-based meta-analysis model using Stan."><title>Fitting a model-based meta-analysis model using Stan — MBMA_stan • MetaStan</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fitting a model-based meta-analysis model using Stan — MBMA_stan"><meta property="og:description" content="`MBMA_stan` fits a model-based meta-analysis model using Stan."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MetaStan</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/MetaStan_BNHM.html">Conducting meta-analysis using MetaStan</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/gunhanb/MetaStan/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Fitting a model-based meta-analysis model using Stan</h1>
      <small class="dont-index">Source: <a href="https://github.com/gunhanb/MetaStan/blob/HEAD/R/MBMA_stan.R" class="external-link"><code>R/MBMA_stan.R</code></a></small>
      <div class="d-none name"><code>MBMA_stan.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>`MBMA_stan` fits a model-based meta-analysis model using Stan.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">MBMA_stan</span><span class="op">(</span>
  data <span class="op">=</span> <span class="cn">NULL</span>,
  likelihood <span class="op">=</span> <span class="cn">NULL</span>,
  dose_response <span class="op">=</span> <span class="st">"emax"</span>,
  mu_prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">)</span>,
  Emax_prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>,
  alpha_prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>,
  tau_prior <span class="op">=</span> <span class="fl">0.5</span>,
  tau_prior_dist <span class="op">=</span> <span class="st">"half-normal"</span>,
  ED50_prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2.5</span>, <span class="fl">1.8</span><span class="op">)</span>,
  ED50_prior_dist <span class="op">=</span> <span class="st">"functional"</span>,
  gamma_prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,
  <span class="va">Pred_doses</span>,
  re <span class="op">=</span> <span class="cn">TRUE</span>,
  ncp <span class="op">=</span> <span class="cn">TRUE</span>,
  chains <span class="op">=</span> <span class="fl">4</span>,
  iter <span class="op">=</span> <span class="fl">2000</span>,
  warmup <span class="op">=</span> <span class="fl">1000</span>,
  adapt_delta <span class="op">=</span> <span class="fl">0.95</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>An object of `create_MBMA_dat`.</p></dd>
<dt>likelihood</dt>
<dd><p>A string specifying the likelihood of distributions defining the statistical
model. Options include "normal", "binomial", and "Poisson".</p></dd>
<dt>dose_response</dt>
<dd><p>A string specifying the function defining the dose-response model.
Options include "linear", "log-linear", "emax", and "sigmoidal".</p></dd>
<dt>mu_prior</dt>
<dd><p>A numerical vector specifying the parameter of the normal prior
density for baseline risks, first value is parameter for mean, second is for variance.
Default is c(0, 10).</p></dd>
<dt>Emax_prior</dt>
<dd><p>A numerical vector specifying the parameter of the normal prior
density for Emax parameter, first value is parameter for mean, second
is for standard deviation. Default is c(0, 10). Needed for emax and sigmoidal models.</p></dd>
<dt>alpha_prior</dt>
<dd><p>A numerical vector specifying the parameter of the normal prior
density for the alpha parameter, first value is parameter for mean, second is for variance.
Default is c(0, 10). Needed for linear and linear log-dose models.</p></dd>
<dt>tau_prior</dt>
<dd><p>A numerical value specifying the standard dev. of the prior density
for heterogenety stdev. Default is 0.5.</p></dd>
<dt>tau_prior_dist</dt>
<dd><p>A string specifying the prior density for the heterogeneity standard deviation,
option is `half-normal` for half-normal prior, `uniform` for uniform prior, `half-cauchy` for
half-cauchy prior.</p></dd>
<dt>ED50_prior</dt>
<dd><p>A numerical vector specifying the parameter of the normal prior
density for ED50 parameter, first value is parameter for mean, second
is for standard deviation. Default is c(0, 10). Needed for emax and sigmoidal models.</p></dd>
<dt>ED50_prior_dist</dt>
<dd><p>A string specifying the prior density for the ED50 parameter,
`functional` is for a functional uniform prior, `half-normal` for uniform prior, `half-cauchy` for
half-cauchy prior.</p></dd>
<dt>gamma_prior</dt>
<dd><p>A numerical vector specifying the parameter of the normal prior
density for gamma parameter, first value is parameter for mean, second
is for standard deviation. Default is c(1, 2). Needed for sigmoidal model.</p></dd>
<dt>Pred_doses</dt>
<dd><p>A numerical vector specifying the doses which prediction will be made.</p></dd>
<dt>re</dt>
<dd><p>A string specifying whether random-effects are included to the model. When `FALSE`, the
model corresponds to a fixed-effects model. The default is `TRUE`.</p></dd>
<dt>ncp</dt>
<dd><p>A string specifying whether to use a non-centered parametrization.
The default is `TRUE`.</p></dd>
<dt>chains</dt>
<dd><p>A positive integer specifying the number of Markov chains.
The default is 4.</p></dd>
<dt>iter</dt>
<dd><p>A positive integer specifying the number of iterations for each chain
(including warmup). The default is 2000.</p></dd>
<dt>warmup</dt>
<dd><p>A positive integer specifying the number of warmup (aka burnin)
iterations per chain. The default is 1000.</p></dd>
<dt>adapt_delta</dt>
<dd><p>A numerical value specfying the target average proposal acceptance
probability for adaptation. See Stan manual for details. Default is 0.95. In general
you should not need to change adapt_delta unless you see a warning message about
divergent transitions, in which case you can increase adapt_delta from the
default to a value closer to 1 (e.g. from 0.95 to 0.99, or from 0.99 to 0.999, etc).</p></dd>
<dt>...</dt>
<dd><p>Further arguments passed to or from other methods.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>an object of class `stanfit` returned by `rstan::sampling`</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Boucher M, et al. The many flavors of model-based meta-analysis:
Part I-Introduction and landmark data. <em>CPT: Pharmacometrics and Systems Pharmacology</em>.
2016;5:54-64.</p>
<p>Guenhan BK, Roever C, Friede T. MetaStan: An R package for meta-analysis
and model-based meta-analysis using Stan. In preparation.</p>
<p>Mawdsley D, et al. Model-based network meta-analysis: A
framework for evidence synthesis of clinical trial data.
<em>CPT: Pharmacometrics and Systems Pharmacology</em>. 2016;5:393-401.</p>
<p>Zhang J, et al. (2014). Network meta-analysis of randomized
clinical trials: Reporting the proper summaries. <em>Clinical Trials</em>.
11(2), 246–262.</p>
<p>Dias S, et al. Absolute or relative effects?
Arm-based synthesis of trial data. <em>Research Synthesis Methods</em>.
2016;7:23–28.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co">## Load the dataset</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">'dat.Eletriptan'</span>, package <span class="op">=</span> <span class="st">"MetaStan"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">datMBMA</span> <span class="op">=</span> <span class="fu"><a href="create_MetaStan_dat.html">create_MetaStan_dat</a></span><span class="op">(</span>dat <span class="op">=</span> <span class="va">dat.Eletriptan</span>,</span>
<span class="r-in">                              armVars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>dose <span class="op">=</span> <span class="st">"d"</span>,</span>
<span class="r-in">                                          responders <span class="op">=</span> <span class="st">"r"</span>,</span>
<span class="r-in">                                          sampleSize <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span>,</span>
<span class="r-in">                              nArmsVar <span class="op">=</span> <span class="st">"nd"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">MBMA.Emax</span>  <span class="op">&lt;-</span> <span class="fu">MBMA_stan</span><span class="op">(</span>data <span class="op">=</span> <span class="va">datMBMA</span>,</span>
<span class="r-in">                        likelihood <span class="op">=</span> <span class="st">"binomial"</span>,</span>
<span class="r-in">                        dose_response <span class="op">=</span> <span class="st">"emax"</span>,</span>
<span class="r-in">                        Pred_doses <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">80</span>, length.out <span class="op">=</span> <span class="fl">11</span><span class="op">)</span>,</span>
<span class="r-in">                        mu_prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span class="r-in">                        Emax_prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span class="r-in">                        tau_prior_dist <span class="op">=</span> <span class="st">"half-normal"</span>,</span>
<span class="r-in">                        tau_prior <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">MBMA.Emax</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Doses (mg)"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"response probabilities"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Burak Kuersad Guenhan, Christian Roever.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer></div>

  

  

  </body></html>

